<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <title>Software para servidores</title>
 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
       href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
       rel="stylesheet">
 
    <link rel="icon" type="image/vnd.microsoft.icon" href="/assets/favicon.ico" sizes="16x16 24x24 36x36 48x48">
 
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <link rel="stylesheet" href="css/server.css" type="text/css">
</head>
<body>
    <h2>Lenguajes de programacion</h2>

    <details>
        <summary>PHP 7.4</summary>
        sudo add-apt-repository ppa:ondrej/php
    
        sudo apt install php7.4 libapache-mod-php7.4 php7.4-curl php.7.4-intl php7.4-zip php7.4-soap
        
        php7.4-xml php7.4-gd php7.4-mbstring php7.4-bcmath php7.4-common php7.4-xml php7.4-mysqli
    </details>

    <h2>Servidores Web</h2>
    
    <details>
        <summary>Apache</summary>

        Apache:

        sudo apt install apache2

        APACHE

        sudo a2enmod php7.4

        sudo a2enmod rewrite

        sudo service apache2 restart

        sudo vim /etc/apache2/envvars

        dentro de export APACHE_RUN_USER=www-data

        cd /var/www/html/

        ls

        cd..

        ls -la

        sudo chown -R www-data:www-data /var/www/html

        sudo vim /etc/php/7.4/apache2/php.ini

        cambia memory_limit=1024M

        vim /etc/apache2/sites-available/000-default.conf

        <Directory /var/www/html>

            Options Indexes FollowSymLinks MultiViews
            AllowOverride all
            Require all granted
        </Directory>

        ip a

        ls 

        pwd

        ls

        sudo rm index.html

        sudo vim index.php

        escribimos <? phpinfo(); ?>
    </details>

    <h2>Gestores de bases de datos</h2>

    <details>
        <summary>MySQL</summary>
        sudo apt install mysql-server

        sudo apt-get install software-properties-common
    </details>


    <details>
        <summary>Instalar MariaDB (Reemplazo Open Source de MySQL)</summary>

        <p>Iniciamos actualizando los repositorios y paquetes: </p>
        <code>sudo apt update && sudo apt upgrade -y</code>
        <code>sudo apt install mariadb-server -y</code>


        Podemos comprobar la instalacion de mariadb si lo deseamos ejecutando los siguientes comandos

        Comprobamos la version de maria db, ejecutando:

        mariadb --version

        Comprobamos el estatus del servicio (Si se esta ejecuando o no), ejecutando:

        sudo systemctl status mariadb

        Es raro, pero si el servicio no esta activo, lo iniciamos ejecutando:

        sudo systemctl start mariadb

        Tambien podemos habilitar el servicio de mariadb, para que se inicie automaticamente ejecutando:

        sudo systemctl enable mariadb



        Despues de la instalacion tenemos que seguir el script de la instalacion segura de mariadb, el cual iniciamos escribiendo el siguiente comando

        sudo mariadb-secure-installation

        Nos hara una serie de preguntas

        In order to log into MariaDB to secure it, we'll need the current password for the root user
        If you've just installed MariaDB, and haven't set the root password yet, you should just press enter here.


        Enter current password for root (enter for none):

        Ingresaremos la contraseña del usuario root de nuestra distribucion, en caso de no tener ninguna, solo presionamos enter


        Switch to unix_socket authentication, presionamos n, porque usaremos el acceso por contraseña

        Change the root password? Presionamos n, porque no debemos cambiarla

        Remove anonymous users? Presionamos y, por seguridad

        Disallow root login remotely? Presionamos y, tambien por seguridad, mas adelante configuraremos un usuario con todos los permisos, pero que no sea root por seguridad

        Remove test database and access to it? Presionamos y, ya que no la necesitamos


        Reload privilige tables now? Presionamos y, para que todos los cambios se realicen inmediatamente


        Despues de hacer esto, solo podremos accesar mediante sudo a mariadb, lo cual es util para un entorno de practicas, pero no lo mas idoneo para un entorno de produccion o servidor

        Eliminacion del metodo de autenticacion unix_socket

        Iniciamos mariadb con permisos de super usuario

        sudo mariadb
        
        ALTER USER 'root'@'localhost' IDENTIFIED VIA mysql_native_password USING PASSWORD ('debian');
        
        FLUSH PRIVILEGES;
        
        mysql -u root -p

        Para mas seguridad, debemos realizar todas las acciones en la base de datos con un usuario distinto al root, por seguridad, aun asi este usuario tendra todos los permisos de root

        CREATE USER 'admin'@'localhost' IDENTIFIED BY 'contraseña_segura';

        GRANT ALL PRIVILEGES ON *.* TO 'admin'@'localhost' WITH GRANT OPTION;

        FLUSH PRIVILEGES;

        Para finalizar la configuracion podemos reiniciar mariadb, ejecutando:

        sudo systemctl restart mariadb

        Comprobamos que se haya reiniciado correctamente ejecutando:

        sudo systemctl status mariadb

        Fuente:

        https://phoenixnap.com/kb/access-denied-for-user-root-localhost
        
    </details>

    <details>
        <summary>OpenSSH</summary>
    
    Primero debemos instalar OpenSSH:
    
    sudo apt install openssh-client
    
    sudo apt install openssh-server
    
    Posteriormente, habilitamos el servicio ssh:
    
    sudo systemctl enable ssh
    
    Tambien puede funcionar este comando, que lo ejecuta mas rapido:
    
    sudo systemctl enable ssh --now
    
    Iniciamos el servicio ssh:
    
    sudo systemctl start ssh
    
    Posteriormente verificamos el servicio:
    
    systemctl status sshd.service
    
    Tambien podemos usar:
    
    systemctl status ssh
    </details>
</body>
</html>